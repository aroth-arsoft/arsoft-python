<?php

class CPreseedPluginVim extends CPreseedPluginBase
{
	private $m_params = array();

	public function __construct($ldap,$client)
	{
		parent::__construct($ldap,$client);
	}

	public function Initialize()
	{
	}

	public function Deinitialze()
	{
	}

	public function Preseed()
	{
		print "#\n";
		print "# VIM parameters\n";
		print "#\n";

		$this->DefaultPreseed('vim',$this->m_params);
	}	
	public function ScriptLate()
	{
		global $config;
		print "#\n";
		print "# VIM setup\n";
		print "#\n";
		
		return;

		$vimrc_file = $this->ReadString('vim','vimrc','','string');

?>
VIMRC_URL=<?php echo $vimrc_file; print "\n"; ?>

VIMRC_FILE=`echo -n "/tmp/"; basename "$VIMRC_URL"`
DEST_VIMRC=/root/.vimrc
grep 'preseed/plugins/vim.inc' $DEST_VIMRC 2>/dev/null 1>/dev/null
if [ $? -ne 0 ]; then
	wget -q -O $VIMRC_FILE "$VIMRC_URL" 2>&1
	RES=$?
	if [ $RES -eq 0 ]; then
		echo "\" Generated by preseed/plugins/vim.inc" > $DEST_VIMRC
		cat $VIMRC_FILE  >> $DEST_VIMRC
		echo "Updated default vim settings"
	else
		echo "Failed to download VIM config $VIMRC_URL"
	fi
fi

<?php

	}
};

?>

