#!/usr/bin/python
# -*- coding: utf-8 -*-
# kate: space-indent on; indent-width 4; mixedindent off; indent-mode python;

import sys
import platform
import os.path
from setuptools import find_packages, setup

target_distribution = os.environ.get('TARGET_DISTRIBUTION', None)
if target_distribution is None:
    if os.path.isfile('/etc/lsb-release'):
        for l in open('/etc/lsb-release', 'r').readlines():
            l = l.strip()
            (k,v) = l.split('=', 1)
            if k == 'DISTRIB_CODENAME':
                target_distribution = v

long_description = None
with open("README.md", "r") as fh:
    long_description = fh.read()

setup(name='arsoft-python',
        version='1.328',
        description='AR Soft Python modules',
        long_description=long_description,
        long_description_content_type="text/markdown",
        author='Andreas Roth',
        author_email='aroth@arsoft-online.com',
        url='http://www.arsoft-online.com/',
        license='GPLv3',
        platforms=['linux'],
        package_dir={'': 'python3'},
        packages=['arsoft',
                    'arsoft.backup',
                    'arsoft.backup.plugins',
                    'arsoft.config',
                    'arsoft.crypto',
                    'arsoft.cups',
                    'arsoft.disks',
                    'arsoft.efi',
                    'arsoft.eiscp',
                    'arsoft.eurosport',
                    'arsoft.fritzbox',
                    'arsoft.kerberos',
                    'arsoft.git',
                    'arsoft.ldap',
                    'arsoft.ldap.slapd',
                    'arsoft.m3u8',
                    'arsoft.mail',
                    'arsoft.mod_python_wsgi',
                    'arsoft.mod_python_wsgi.mod_python',
                    'arsoft.mount',
                    'arsoft.nagios',
                    'arsoft.nfs',
                    'arsoft.openvpn',
                    'arsoft.trac',
                    'arsoft.trac.plugins',
                    'arsoft.web',
                    'arsoft.web.templatetags',
                    'arsoft.xdg',
                    'arsoft.xmpp'
                    ],
        scripts=[
            'python3/certinfo',
            'python3/dns-query',
            'python3/fritzbox-status',
            'python3/ini-util',
            'python3/trac-sqlite2mysql',
            'python3/trac-svn2git',
            'python3/trac-manage',
            'python3/trac-git-post-receive-hook',
            'python3/arsoft-backup',
            'python3/arsoft-imapsync',
            'python3/arsoft-mailer',
            'python3/alog',
            'python3/onkyo-rs232',
            'python3/system-info',
            'python3/nsswitch-config',
            'python3/efiinfo',
            'python3/ssdp-discover',
            'python3/managehosts',
            'python3/openvpn-admin',
            'python3/svnbackup',
            'python3/cups-admin',
            'python3/slapd-config',
            'python3/autofs-ldap-auth',
            'python3/puppet-setup',
            'python3/puppet-template-check',
            'python3/heimdal-password-expire',
            'python3/dns-update',
            'python3/eurosport-stream',
            'python3/ad-rfc2307',
            'python3/ad-password-expire',
            'python3/video-rename',
            ],
        data_files=[
            ('/etc/cron.d', ['cron/arsoft-check-mk-plugins'] ),
            ('/etc/arsoft/alog.d', ['config/default_field_alias.conf', 'config/default_log_levels.conf',
                            'config/default_pattern.conf', 'config/default_shortcuts.conf']),
            ('/etc/nagios-plugins/config', ['nagios/fritzbox.cfg',
                                    'nagios/openvpn.cfg',
                                    'nagios/kernel_modules.cfg',
                                    'nagios/xmpp_notify.cfg',
                                    'nagios/puppet_agent.cfg',
                                    'nagios/weather.cfg',
                                    'nagios/ipp.cfg',
                                    'nagios/rkhunter.cfg',
                                    ]),
            ('/usr/bin', [
                    'python3/onkyo-remote',
                    'python3/nsswitch-ldap',
                    'python3/nsswitch-winbind',
                    'python3/nsswitch-sss',
                    'python3/openvpn-status',
                    ]),
            ('/usr/lib/nagios', ['python3/send_xmpp_notification']),
            ('/usr/lib/nagios/plugins', [
                    'python3/check_fritzbox',
                    'python3/check_openvpn',
                    'python3/check_kernel_modules',
                    'python3/check_puppet_agent',
                    'python3/check_weather',
                    'python3/check_ipp',
                    'python3/check_rkhunter',
                ]),
            ('/usr/lib/nagios/plugins/test_data', ['test_data/check_ipp.test', 'test_data/check_ipp_jobs.test', 'test_data/check_ipp_completed_jobs.test']),
            ('/usr/share/check_mk/checks', [
                'check_mk/checks/apt',
                'check_mk/checks/cups',
                'check_mk/checks/cyrus_imapd',
                'check_mk/checks/dmi_baseboard',
                'check_mk/checks/dmi_bios',
                'check_mk/checks/dovecot',
                'check_mk/checks/eiscp',
                'check_mk/checks/fritz_ddns',
                'check_mk/checks/jenkins',
                'check_mk/checks/networkd',
                'check_mk/checks/nginx_cert',
                'check_mk/checks/openvpn',
                'check_mk/checks/openvz_ubc',
                'check_mk/checks/postfix_cert',
                'check_mk/checks/puppet_agent',
                'check_mk/checks/puppetdb',
                'check_mk/checks/rkhunter',
                'check_mk/checks/samba_status',
                'check_mk/checks/slapd_cert',
                'check_mk/checks/systemd',
                'check_mk/checks/systemd_failed',
                'check_mk/checks/systemd_timedate',
                    ] ),
            ('/usr/lib/check_mk_agent',
                        ['check_mk/check_mk_agent_detect_plugins',
                         'check_mk/cron/python3/check_mk_agent_apt',
                                ]  ),
            ('/usr/share/check_mk/agents/plugins', [
                    'check_mk/agents/plugins/cups',
                    'check_mk/agents/plugins/cyrus_imapd',
                    'check_mk/agents/plugins/dmi_sysinfo',
                    'check_mk/agents/plugins/dmraid',
                    'check_mk/agents/plugins/dovecot',
                    'check_mk/agents/plugins/jenkins',
                    'check_mk/agents/plugins/networkd',
                    'check_mk/agents/plugins/nginx_cert',
                    'check_mk/agents/plugins/openvpn',
                    'check_mk/agents/plugins/openvz_ubc',
                    'check_mk/agents/plugins/postfix_cert',
                    'check_mk/agents/plugins/puppet_agent',
                    'check_mk/agents/plugins/puppetdb',
                    'check_mk/agents/plugins/rkhunter',
                    'check_mk/agents/plugins/samba_status',
                    'check_mk/agents/plugins/slapd_cert',
                    'check_mk/agents/plugins/systemd',
                ] ),
            ('/usr/share/check_mk/special', [
                    'check_mk/agents/special/agent_fritzbox',
                    'check_mk/agents/special/agent_eiscp'
                ] )
            ]
        )
